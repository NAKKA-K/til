# GitHubでのグループ開発フロー
## 今回重要な用語
- issue (問題定義)
- branch (調べて！)
- Merge (branch同士の変更点を結合する)
- Push (ローカルで作業した内容を、リモートに反映させる)
- Pull Request (GitHub上でのMerge要求)
- commit (変更の確定をリポジトリに含める)

## 流れ
**issue -> branch -> 開発 -> push -> pull request**

## 流れの詳細
### issue
全体の開発工程から、できる限り小さな問題に切り出し、その問題をissueとして定義作成します。  
`例) ログインパスワードに8文字以上しか設定できないようにする`  

issueの粒度はプロジェクトの開発段階によって変わります。  
開発初期であればissueの粒度は大きくなり、リリース後であれば1つのバグ対応のみといった小さな粒度になることが多いです。  

プロジェクトによっては、GitHubのProject機能を使う場合もあります。  
カンバン方式を使用して、タスクをissueよりもまとまった形で整理できます。  
Project機能には、カンバンに書かれたタスクをissueとして作成することができます。  
そのため、Project機能を使用してタスクをまとめて書き出し(WBSなど)、issueに変換し作業を開始するといった方法が取られます。  

### branch
issueを作成したら、それに対応したbranchを作成。(ローカルでの作業)  
branch名には作業内容を簡潔に表す名前をつけ、名前の最後に対応するissue番号を付属させます。  
`例) git checkout -b valid_password#1`  

ブランチを作成したら、そのブランチをリモートにPush。  
これによってチームの人が、作業の開始を把握できます。  
`例) git push origin valid_password#1`  

### 開発
先ほど作成したbranchで作業を始めます。  
作業をすると変更をcommitする必要があります。  
この時、Gitに慣れていない人は、作業が終わった後に一括でcommitしがちです。  
しかし、commitの粒度が大きいとコードレビューをする時などに非常に見づらく、大変です。  
最初の間は目安として、**1ファイル**を編集するとcommit、1ファイルの変更が多くなる場合は**1機能**ごとにcommitなど、とにかくcommit間隔を狭めることを意識しましょう。  

commit間隔の他に、commitメッセージもかなり重要です。  
コミットメッセージを後から見直した時に、メッセージから作業内容がだいたい分かるようにすべきです。  
先頭から作業内容の対応するissue番号、  
作業の方向性を表す`Add` `Update` `Move` `Remove` `Change` `Rename`等の動詞、  
作業内容の説明(外部に公開する場合は英語)、  
を元にメッセージを組み立てます。  
`例) #1 Add パスワードのバリデーションを追加`  

### Push
作業が終わったらローカルの変更をPushしましょう。  
Pushするためには、自分の派生元のbranchの最新の変更をpullしましょう。  
pullが正常に完了すればGitHubにPushします。  

作業完了のPush以外にも、作業がある程度進めば定期的にPushすべきです。  
定期的にPushすることで、全員の作業の**進捗状況が把握**できたり、分からないところがあった場合にGitHubを見せることによって**いつでも質問できる**、といった利点があります。  
作業進捗が少しでもあった場合、できれば**１日1回**はPushしましょう。  

### Pull Request
作業したbranchをGitHubにPushしていれば、PullRequest(以下pullreq)が送れます。  
pullreqを送ることによって、結合元branchと結合先branchの変更点や、commitログ、pullreqメッセージをまとめたmerge申請を作成することができます。  
そのpullreqは履歴として残るので、後から見直したい時にも便利です。  

pullreqの詳細画面には緑色のmergeボタンがあります。  
小さなプロジェクトでは自分でmergeしてしまうことも多々あります。  
しかし、コードレビューをする場合や、リポジトリの設定で一部の人しかmergeできないようにしている場合もあります。  
その場合、mergeしてくれるのを待ちましょう。  
mergeしたら結合先の変更をpullでローカルに反映させましょう。  
その後、開発フローの先頭に戻ってissueから始めましょう。  

## 応用編(小ネタ)
- pullreqのメッセージに`close #1`みたいに書いておくと、mergeされた時勝手にissueがcloseされます。  
- CIツールをGitHubと連携させると、pushやpullreqを送った時などに自動的にテストを走らせ、GitHub上でも表示されるようになります。  
- pullreqやissueなどのテンプレートをリポジトリに含めることによって、作成時にテンプレートが自動入力された状態から書き始めることができます。  
- Slackなどのチャットツールと連携し、GitHubからの通知を適宜チャットツールから見られるようにすると、開発効率が格段に上がります。
